<!DOCTYPE html>
<html>
     <head>
           <title>sign up page</title>
 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
 
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
 
 <script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>

<style>
#formQuestions{
margin-left:25%;
}
textarea{
  height:50px;
  width:100%;
}
.jumbotron{
  background-color: #b9cfed;
  border:3px solid #01295c;
}
.well{
 background-image: linear-gradient(to bottom,#b9cfed 0,#b9cfed 100%);
}
body{
  background-color: #f2f6fa;
}
 
</style>
 
     </head>
<body>
 
<div class="container">
    <div class="jumbotron"><h1>Foodie Finder Sign-up</h1><p>fill out the information below and click submit to find your foodie..</p>
</div>

</div>
<div class="container" id="formQuestions">
<div class= "col-lg-6">
 
<form method="POST" role="form" id="signUpForm">
    <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name">
              </div>

              <div class="form-group">
                <label for="picURL">Picture URL</label>
                <input type="text" class="form-control" id="picURL">
              </div>

              <br>
              <div class="well well-lg" id="well"><h3>With the Following questions,input a number 1-5. 1 being you strongly disagree. 5 being you strongly agree..</h3></div>
              
              <br>
             
              <div class="form-group">
                   <strong> Quesiton 1</strong><p/>
                <label for="Q1">Breakfast is the most important meal of the day</label>
                <input type="text" class="form-control" id="Q1">
              </div>

              <div class="form-group">
                   <strong> Quesiton 2</strong><p/>
                <label for="Q2">the best kind of dessert always involes chocolate</label>
                <input type="text" class="form-control" id="Q2">
              </div>

              <div class="form-group">
                   <strong> Quesiton 3</strong><p/>
                <label for="Q3">Hot Pockets are a good for quick dinners</label>
                <input type="text" class="form-control" id="Q3">
              </div>

              <div class="form-group">
                 <strong> Quesiton 4</strong><p/>
                <label for="Q4">When i head out to eat, I prefer it to be somewhere I have eaten already</label>
                <input type="text" class="form-control" id="Q4">
              </div>

              <div class="form-group">
                   <strong> Quesiton 5</strong><p/>
                <label for="Q5">If i can't pronounce what I am eating then it is not worth eating</label>
                <input type="text" class="form-control" id="Q5">
              </div>

              <div class="form-group">
                   <strong> Quesiton 6</strong><p/>
                <label for="Q6">When with a group of friends I haven't seen in a while, I make everyone chip in and pay for the meal </label>
                <input type="text" class="form-control" id="Q6">
              </div>

              <div class="form-group">
                   <strong> Quesiton 7</strong><p/>
                <label for="Q7">I don't tip, unless the service I get is above and beyond my expectations</label>
                <input type="text" class="form-control" id="Q7">
              </div>

              <div class="form-group">
                   <strong> Quesiton 8</strong><p/>
                <label for="Q8">If I order meal and it isn't quite right, I make sure to let the waiter know and have it fixed immediately</label>
                <input type="text" class="form-control" id="Q8">
              </div>

              <div class="form-group">
                   <strong> Quesiton 9</strong><p/>
                <label for="Q9">My go to meal always involes red meat</label>
                <input type="text" class="form-control" id="Q9">
              </div>

              <div class="form-group">
                   <strong> Quesiton 10</strong><p/>
                <label for="Q10">Breakfast for dinner is weird</label>
                <input type="text" class="form-control" id="Q10">
              </div>

              <div class="form-group">
                   <strong> Tell a little about yourself</strong><p/>
                <label for="about"></label>
                <textarea id="about" name="about" required="required"></textarea>
                
              </div>

            </form>
            <br>
            <div class="text-right">
              <button type="submit" class="btn btn-primary btn-md" id="button"><span class="glyphicon glyphicon-fire"></span> Find your Foodies</button>
            </div>
             <a href="/api/users"> API USERS</a>
          </div>
        </div>
      </div>
    </div>
  </div>
 
 <script src="https://code.jquery.com/jquery-3.2.1.min.js"
  	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
 	 crossorigin="anonymous"></script>

 
 <script type="text/javascript">


$("#button").on("click", function(event){
    event.preventDefault();
    var newUser = {
        name: $("#name").val().trim(),
        picURL: $("#picURL").val().trim(),
        q1:$("#Q1").val().trim(),
        q2:$("#Q2").val().trim(),
        q3:$("#Q3").val().trim(),
        q4:$("#Q4").val().trim(),
        q5:$("#Q5").val().trim(),
        q6:$("#Q6").val().trim(),
        q7:$("#Q7").val().trim(),
        q8:$("#Q8").val().trim(),
        q9:$("#Q9").val().trim(),
        q10:$("#Q10").val().trim(),
        about:$("#about").val().trim()
    };

    $.post("/api/users",newUser)
    .done(function(data){
        console.log(data);
        alert("information added");
        tryi();

    });

      
  


    
  
    
   
});

var comp = [];
function tryi(){
    $.get("/api/users").then(function(data){

      for(q=0;q<(data.length-1);q++){
        var total = Math.abs(parseInt(data[data.length-1].q1) - parseInt(data[q].q1) + (parseInt(data[data.length-1].q2) - parseInt(data[q].q2)) + (parseInt(data[data.length-1].q3) - parseInt(data[q].q3)) + (parseInt(data[data.length-1].q4) - parseInt(data[q].q4))+ (parseInt(data[data.length-1].q5) - parseInt(data[q].q5)) + (parseInt(data[data.length-1].q6) - parseInt(data[q].q6)) + (parseInt(data[data.length-1].q7) - parseInt(data[q].q7))+ (parseInt(data[data.length-1].q8) - parseInt(data[q].q8))+(parseInt(data[data.length-1].q9) - parseInt(data[q].q9))+ (parseInt(data[data.length-1].q10) - parseInt(data[q].q10)));
        if(total <= 10){

          var matching = {
            name: data[q].name,
            picURL:data[q].picURL,
            q1:data[q].q1,
            q2:data[q].q2,
            q3:data[q].q3,
            q4:data[q].q4,
            q5:data[q].q5,
            q6:data[q].q6,
            q7:data[q].q7,
            q8:data[q].q8,
            q9:data[q].q9,
            q10:data[q].q10,
            about:data[q].about
          };

          $.post("/api/match",matching)
    .done(function(data){
        console.log(data);
        alert("information added matching");
          
         

        });
       }
        }
      
    $(location).attr('href', '/compatible')
  })
    }
 </script>
 
 
 
 
 
 
 
</body>
 
</html>